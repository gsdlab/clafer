100c100
< Declaration : 'enum' PosIdent '=' ListEnumId { EnumDecl $2 $4 } 
---
> Declaration : 'enum' PosIdent '=' ListEnumId { PosEnumDecl (gp $1) $2 $4 } 
109c109
< Constraint : '[' ListExp ']' { Constraint (reverse $2) } 
---
> Constraint : '[' ListExp ']' { PosConstraint (gp $1) (reverse $2) } 
113c113
< SoftConstraint : '(' ListExp ')' { SoftConstraint (reverse $2) } 
---
> SoftConstraint : '(' ListExp ')' { PosSoftConstraint (gp $1) (reverse $2) } 
117c117
< Goal : '<<' ListExp '>>' { Goal (reverse $2) } 
---
> Goal : '<<' ListExp '>>' { PosGoal (gp $1) (reverse $2) } 
122c122
<   | 'abstract' { Abstract }
---
>   | 'abstract' { PosAbstract (gp $1) }
127c127
<   | '{' ListElement '}' { ElementsList (reverse $2) }
---
>   | '{' ListElement '}' { PosElementsList (gp $1) (reverse $2) }
132c132
<   | '`' Name Card Elements { ClaferUse $2 $3 $4 }
---
> | '`' Name Card Elements { PosClaferUse (gp $1) $2 $3 $4 }
144,146c144,146
< SuperHow : ':' { SuperColon } 
<   | '->' { SuperArrow }
<   | '->>' { SuperMArrow }
---
> SuperHow : ':' { PosSuperColon (gp $1) } 
>   | '->' { PosSuperArrow (gp $1) }
>   | '->>' { PosSuperMArrow (gp $1) }
155,156c155,156
< InitHow : '=' { InitHow_1 } 
<   | ':=' { InitHow_2 }
---
> InitHow : '=' { PosInitHow_1 (gp $1) } 
>   | ':=' { PosInitHow_2 (gp $1) }
161,164c161,164
<   | 'xor' { GCardXor }
<   | 'or' { GCardOr }
<   | 'mux' { GCardMux }
<   | 'opt' { GCardOpt }
---
>   | 'xor' { PosGCardXor (gp $1) }
>   | 'or' { PosGCardOr (gp $1) }
>   | 'mux' { PosGCardMux (gp $1) }
>   | 'opt' { PosGCardOpt (gp $1) }
170,172c170,172
<   | '?' { CardLone }
<   | '+' { CardSome }
<   | '*' { CardAny }
---
>   | '?' { PosCardLone (gp $1) }
>   | '+' { PosCardSome (gp $1) }
>   | '*' { PosCardAny (gp $1) }
182c182
< ExInteger : '*' { ExIntegerAst } 
---
> ExInteger : '*' { PosExIntegerAst (gp $1) } 
191,192c191,192
< Exp : 'all' 'disj' Decl '|' Exp { DeclAllDisj $3 $5 } 
<   | 'all' Decl '|' Exp { DeclAll $2 $4 }
---
> Exp : 'all' 'disj' Decl '|' Exp { PosDeclAllDisj (gp $1) $3 $5 } 
>   | 'all' Decl '|' Exp { PosDeclAll (gp $1) $2 $4 }
199,200c199,200
< Exp1 : 'max' Exp2 { EGMax $2 } 
<   | 'min' Exp2 { EGMin $2 }
---
> Exp1 : 'max' Exp2 { PosEGMax (gp $1) $2 } 
>   | 'min' Exp2 { PosEGMin (gp $1) $2 }
226c226
< Exp6 : '!' Exp7 { ENeg $2 } 
---
> Exp6 : '!' Exp7 { PosENeg (gp $1) $2 } 
261,263c261,263
< Exp11 : 'sum' Exp12 { ESumSetExp $2 } 
<   | '#' Exp12 { ECSetExp $2 }
<   | '-' Exp12 { EMinExp $2 }
---
> Exp11 : 'sum' Exp12 { PosESumSetExp (gp $1) $2 } 
>   | '-' Exp12 { PosEMinExp (gp $1) $2 }
>   | '#' Exp12 { PosECSetExp (gp $1) $2 }
266c266
< Exp12 : 'if' Exp12 'then' Exp12 'else' Exp13 { EImpliesElse $2 $4 $6 } 
---
> Exp12 : 'if' Exp12 'then' Exp12 'else' Exp13 { PosEImpliesElse (gp $1) $2 $4 $6 } 
319,322c319,322
< Quant : 'no' { QuantNo } 
<   | 'lone' { QuantLone }
<   | 'one' { QuantOne }
<   | 'some' { QuantSome }
---
> Quant : 'no' { PosQuantNo (gp $1) } 
>   | 'lone' { PosQuantLone (gp $1) }
>   | 'one' { PosQuantOne (gp $1) }
>   | 'some' { PosQuantSome (gp $1) }
384a385,386
> 
> gp x@(PT (Pn _ l c) _) = Span (Pos (toInteger l) (toInteger c)) (Pos (toInteger l) (toInteger c + toInteger (length $ prToken x)))
